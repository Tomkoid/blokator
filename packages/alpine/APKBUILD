# Maintainer: Tomkoid <tomkoid@tomkoid.tk>
pkgname="blokator"
pkgver=0.5.3
pkgrel=1
pkgdesc="Simple system-wide adblocker"
url="https://gitlab.com/Tomkoid/blokator"
arch="x86_64"
makedepends="cargo git autoconf openssl openssl-dev"
license="GPL3"
source="$pkgname-$pkgver.zip::https://gitlab.com/Tomkoid/blokator/-/archive/$pkgver/blokator-$pkgver.zip"

build() {
  # Prepare man page
  cp man-pages/blokator man-pages/blokator.1
  gzip man-pages/blokator.1

  # Build
  cargo build --release
}

package() {
  install -Dm755 "target/release/blokator" "${pkgdir}/usr/bin/blokator"
  install -Dm644 "man-pages/blokator.1.gz" "${pkgdir}/usr/share/man/man1/blokator.1.gz"
}

sha512sums="
6cfdc3bd96454b0d855c84665aa0df6c6c3c7fc4cc712c44b7b6b9c87543b0083eb99a37c4a40d336d08d8d732a9c817242c2187bd801ffd99f499644c3d46ee  blokator-0.5.3.zip
"
